
# Инструкция по развертыванию проекта на сервере

## 1. Подключение к серверу по SSH

Для начала необходимо подключиться к серверу, используя SSH. 

```bash
ssh username@your-server-ip
```

Где:
- `username` — имя пользователя на сервере.
- `your-server-ip` — IP-адрес сервера.


## 2. Установка Docker
Проверить есть ли на сервере docker, docker-compose с помощью команд:
```shell
docker -v
docker compose -v
```
Если команды не распознались, то для установки Docker на сервер необходимо выполнить следующие шаги:

- Установить утилиту `curl`.
  Возможно она уже установлена. Чтобы проверить, необходимо выполнить команду:
```shell
curl --version
```
- Если команда выводит информацию о версии curl, значит, утилита уже установлена. 
В противном случае необходимо установить данную утилиту. Ниже приведен пример для операционнй системы Ubuntu:
```shell
sudo apt install curl -y
```
- Затем скачайте и установите Docker с помощью официального скрипта:

```bash
curl -sSL https://get.docker.com | sh
```

Этот скрипт — официальный инсталлятор Docker, который автоматически загрузит и установит последнюю версию Docker на вашу систему.

- После установки Docker необходимо выйти из текущей сессии SSH и войти снова, чтобы Docker был доступен в текущем сеансе:

```bash
exit
```
## 3. Установка Git
Для клонирования репозитория с GitHub на сервер необходимо установить утилиту git. 
Чтобы проверить, установлен ли Git, выполните команду:
```shell
git --version
```
Если команда выводит информацию о версии git, значит, утилита уже установлена. 
В противном необходимо установить Git. Ниже приведен пример команды для установки внутри операционной системы Ubuntu.
```shell
sudo apt install git -y
```
## 4. Клонирование репозитория

Теперь необходимо клонировать репозиторий проекта с GitHub на сервер:

```bash
git clone https://github.com/AmiFideles/practice-manager.git
```

## 5. Переход в директорию проекта

Перейдите в директорию с проектом, чтобы выполнить команды Docker:

```bash
cd practice-manager
```

## 6. Задание переменных окружения для бота

В проекте необходимо указать токен для Telegram-бота, полученный через BotFather.

Чтобы задать токен бота через переменную окружения, выполните команду:

```bash
export BOT_TOKEN="your-bot-token"
```

```bash
docker compose down
```

Это остановит и удалит все контейнеры, созданные предыдущими запусками, и подготовит систему для нового запуска.

## 7. Запуск сервисов

Для запуска сервисов с помощью Docker Compose выполните команду:

```bash
docker compose up --build -d
```

Эта команда:
- Собирает Docker-образы для всех сервисов, описанных в `docker-compose.yml`.
- Создаёт необходимые тома для хранения данных.
- Создаёт сеть, обеспечивающую взаимодействие всех сервисов.
- Запускает контейнеры в фоновом режиме (`-d`).

## 8. Проверка работы сервисов

После выполнения команд вы можете проверить статус работающих контейнеров с помощью:

```bash
docker ps
```

Это покажет список всех активных контейнеров на сервере. Убедитесь, что все сервисы, включая Telegram-бота, запущены.

---